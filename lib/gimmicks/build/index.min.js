"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@13h/core");class e{position;speed;size;borderSize;payload;step=0;constructor(i,s=.01,o=1,r){this.speed=t.point.get(i,e.randomDirection(.01*Math.random()+.01)),this.size=t.point.get(s),this.borderSize=t.point.get(o),this.position=t.point.get(r,t.point.mul(this.borderSize,.5))}setPayload(t){return this.payload=t,this}hitTest(t){const[e,i]=t,[s,o]=this.size,[r,n]=this.borderSize,a=i<0,h=i+o>n,d=e<0,p=e+s>r;return a||h||d||p?[d||p?-1:1,a||h?-1:1]:null}next(){const[t,e]=this.position,[i,s]=this.speed,o=[t+i,e+s],r=this.hitTest(o);r?(this.speed[0]=this.speed[0]*r[0],this.speed[1]=this.speed[1]*r[1]):(this.position[0]=o[0],this.position[1]=o[1]),this.step+=1}rewind(t){for(let e=0;e<t;e++)this.next();return this}static randomDirection(e){return t.point.rotate([e,0],Math.random()*t.TWO_PI)}static speedDirection(e,i){return t.point.rotate([e,0],i)}}exports.FlyingBounce=e,exports.whiteNoise=t=>{const e=t.context.getImageData(0,0,t.width,t.height),i=t.width*t.height;for(let t=0;t<i;t++){const i=Math.round(255*Math.random());e.data[4*t]=i,e.data[4*t+1]=i,e.data[4*t+2]=i,e.data[4*t+3]=255}t.context.putImageData(e,0,0)};
