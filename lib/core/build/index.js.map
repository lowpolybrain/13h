{"version":3,"file":"index.js","sources":["../src/helpers/animate.ts","../src/helpers/osc.ts","../src/helpers/point.ts","../src/constants.ts","../src/helpers/color.ts","../src/helpers/shape.ts","../src/helpers/random.ts","../src/types/corners.ts","../src/types/lineCap.ts","../src/types/repetition.ts","../src/classes/Canvas.ts","../src/classes/EventListener.ts"],"sourcesContent":["export type AnimateMethod = (\n  // Render counter - it is incremented for every render.\n  // Affected by frameSkip and frameRepeat.\n  renderedFrame: number,\n  // Time provided by requestAnimationFrame (if any)\n  time: number\n) => void;\n\nexport type AnimateOptions = {\n  initialSkip?: number;\n\n  // Repeat each frame\n  frameRepeat?: number;\n\n  // How many frames to skip. If you provide 5 here - only every\n  // 5th call will be landed. Useful to slow stuff down\n  frameSkip?: number;\n\n  // Used for sandboxes and hot module reloading to kill\n  // previous requestAnimationFrames (as they stack up)\n  // leading to tremendous performance problems\n  cleanupId?: string;\n};\n\ndeclare global {\n  interface Window {\n    _cdeCleanup?: Record<string, number>;\n  }\n}\n\nexport const animate = function (nextFrame: AnimateMethod, options: AnimateOptions = {}) {\n  let renderedFrame = 0;\n\n  let frameSkipCounter = 0;\n\n  let setCleanup: ((cleanupNum: number) => void) | undefined;\n\n  if (options.cleanupId) {\n    if (!window._cdeCleanup) {\n      window._cdeCleanup = {};\n    } else {\n      const frameId = window._cdeCleanup[options.cleanupId];\n      if (frameId) {\n        console.log('Cancelled', frameId);\n        window.cancelAnimationFrame(frameId);\n      }\n    }\n    setCleanup = (cleanupNum: number) => {\n      if (window._cdeCleanup && options.cleanupId) {\n        window._cdeCleanup[options.cleanupId] = cleanupNum;\n      }\n    };\n  }\n\n  const renderNextFrame = (time: number) => {\n    if (options.frameSkip != null && options.frameSkip > 0) {\n      frameSkipCounter = (frameSkipCounter + 1) % options.frameSkip;\n      if (!frameSkipCounter) {\n        nextFrame(renderedFrame++, time);\n      }\n    } else {\n      nextFrame(renderedFrame++, time);\n    }\n  };\n\n  if (options.initialSkip != null && options.initialSkip > 0) {\n    for (let i = 0; i < options.initialSkip; i++) {\n      renderNextFrame(0);\n    }\n  }\n\n  const rqAnimFrame = (fn: (n: number) => void) => {\n    const id = window.requestAnimationFrame(fn);\n    if (setCleanup) {\n      setCleanup(id);\n    }\n  };\n\n  const goToNextFrame = (n: number) => {\n    if (options.frameRepeat) {\n      for (let i = 0; i <= options.frameRepeat; i++) {\n        renderNextFrame(n);\n      }\n    } else {\n      renderNextFrame(n);\n    }\n    rqAnimFrame(goToNextFrame);\n  };\n\n  rqAnimFrame(goToNextFrame);\n};\n","export const osc = {\n  sin: function (t: number, max: number): number {\n    return (Math.sin(t) * max) / 2 + max / 2;\n  },\n  cos: function (t: number, max: number): number {\n    return (Math.cos(t) * max) / 2 + max / 2;\n  }\n};\n","import { Point, PointArg } from '../types';\n\nconst getPoint = function (\n  point: PointArg,\n  default_: Point = [0, 0]\n): Point {\n  if (point == null) {\n    return [default_[0], default_[1]];\n  }\n  return typeof point === 'number'\n    ? [point, point]\n    : [point[0], point[1]];\n};\n\n// TODO: Maybe, split fns to \"fast\" and \"handy\".\n// Or maybe not (fast should be calculated separately then, without creating arrays)\nexport const point = {\n  round(point: Point): Point {\n    return [Math.round(point[0]), Math.round(point[1])];\n  },\n  floor(point: Point): Point {\n    return [Math.round(point[0]), Math.floor(point[1])];\n  },\n  ceil(point: Point): Point {\n    return [Math.round(point[0]), Math.ceil(point[1])];\n  },\n  add(...args: PointArg[]): Point {\n    let sx = 0;\n    let sy = 0;\n    for (let i = 0; i < args.length; i++) {\n      const [ax, ay] = point.get(args[i]);\n      sx += ax;\n      sy += ay;\n    }\n    return [sx, sy];\n  },\n\n  dist(a: Point, b: Point = [0, 0]): number {\n    const dx = a[0] - b[0];\n    const dy = a[1] - b[1];\n    return Math.sqrt(dx * dx + dy * dy);\n  },\n\n  neg([ax, ay]: Point): Point {\n    return [-ax, -ay];\n  },\n\n  mul(...args: PointArg[]): Point {\n    let mx = 1;\n    let my = 1;\n    for (let i = 0; i < args.length; i++) {\n      const [x, y] = getPoint(args[i]);\n      mx *= x;\n      my *= y;\n    }\n    return [mx, my];\n  },\n\n  div([ax, ay]: Point, b: PointArg): Point {\n    const [bx, by] = getPoint(b);\n    return [ax / bx, ay / by];\n  },\n\n  sub([ax, ay]: Point, b: PointArg): Point {\n    const [bx, by] = getPoint(b);\n    return [ax - bx, ay - by];\n  },\n\n  get: getPoint,\n\n  scale(\n    [x, y]: Point,\n    scale: PointArg,\n    pivot?: PointArg\n  ): Point {\n    const [sx, sy] = getPoint(scale);\n    const [px, py] = getPoint(pivot);\n    return [(x - px) * sx + py, (y - py) * sy + py];\n  },\n\n  mod([x, y]: Point, b: PointArg): Point {\n    const [bx, by] = getPoint(b);\n    return [x % bx, y % by];\n  },\n\n  rotate(\n    [x, y]: Point,\n    angle: number,\n    pivot?: PointArg\n  ): Point {\n    const [px, py] = getPoint(pivot || [0, 0]);\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n    return [\n      sin * (x - px) + cos * (y - py) + px,\n      sin * (y - py) - cos * (x - px) + py\n    ];\n  },\n\n  sizeToScale(\n    currentSize: PointArg,\n    targetSize: PointArg\n  ): Point {\n    const cs = point.get(currentSize);\n    if (cs[0] === 0 || cs[1] === 0) return [0, 0];\n    const ts = point.get(targetSize);\n    return [ts[0] / cs[0], ts[1] / cs[1]];\n  }\n};\n","export const TWO_PI = Math.PI * 2;\nexport const DEG_TO_RAD = Math.PI / 180;\nexport const RAD_TO_DEG = 180 / Math.PI;\nexport const PI_BY_TWO = Math.PI / 2;\nexport const SQR_TWO = Math.sqrt(2);\n\nexport const REVISION = 2;\n","import { Canvas } from '../classes';\nimport { PointArg } from '../types';\nimport { point } from './point';\nimport { RAD_TO_DEG } from '../constants';\n\nexport const CGA = {\n  black: '#000000',\n  blue: '#00A',\n  green: '#0A0',\n  cyan: '#0A0',\n  red: '#A00',\n  magenta: '#A0A',\n  brown: '#A50',\n  lightGray: '#AAA',\n  darkGray: '#555',\n  lightBlue: '#55f',\n  lightGreen: '#5f5',\n  lightCyan: '#5F5',\n  lightRed: '#F55',\n  lightMagenta: '#F5F',\n  yellow: '#FF5',\n  white: '#FFF'\n};\n\nexport const color = {\n  // TODO: Refactor this horrible clusterfuck\n  // Hue between two hues. Last parameter defines whether\n  // in degrees (360), radians (TWO_PI) or just from 0 to 1 (1)\n  hueBetween(\n    fromInDeg: number,\n    toInDeg: number,\n    multipler: number = 360\n  ): number {\n    const aaa =\n      fromInDeg > multipler\n        ? fromInDeg % multipler\n        : fromInDeg;\n    const bbb =\n      toInDeg > multipler ? toInDeg % multipler : toInDeg;\n    const aa = aaa / multipler;\n    const baa = bbb / multipler;\n    const [a, ba] = aa < baa ? [aa, baa] : [baa, aa];\n    const d = (a + ba) / 2;\n    return d * multipler;\n  },\n  hsl(\n    hueInDeg: number = 0,\n    saturationInPercent: number = 100,\n    lightnessInPercent: number = 50,\n    alpha: number = 1\n  ): string {\n    return alpha < 1\n      ? `hsla(${hueInDeg}, ${saturationInPercent}%, ${lightnessInPercent}%, ${alpha})`\n      : `hsl(${hueInDeg}, ${saturationInPercent}%, ${lightnessInPercent}%)`;\n  },\n\n  hslRot(rotInRad: number): string {\n    return color.hsl(Math.round(rotInRad * RAD_TO_DEG));\n  },\n\n  rgb(\n    r255: number = 0,\n    g255: number = r255,\n    b255: number = r255,\n    alpha: number = 1\n  ): string {\n    return alpha < 1\n      ? `rgba(${r255},${g255},${b255}, ${alpha})`\n      : `rgba(${r255},${g255},${b255})`;\n  },\n\n  ...CGA\n};\n\nexport const getColor = function (\n  canvas: Canvas,\n  coords: PointArg\n): Uint8ClampedArray {\n  const [x, y] = point.get(coords);\n  return canvas.context.getImageData(x, y, 1, 1).data;\n};\n","import { Point, PointArg, Shape } from '../types';\nimport { point } from './point';\nimport { TWO_PI } from '../constants';\n\nconst rotate = function (\n  shp: Shape,\n  angle: number,\n  pivot?: PointArg\n): Shape {\n  const pvt = point.get(pivot);\n  const rotatedShape: Point[] = [];\n  for (let i = 0; i < shp.length; i++) {\n    rotatedShape.push(point.rotate(shp[i], angle, pvt));\n  }\n  return shp.map((dim) => point.rotate(dim, angle, pvt));\n};\n\nconst scale = function (\n  shp: Shape,\n  scale: PointArg\n): Shape {\n  const scl = point.get(scale);\n  const scaledShape: Point[] = [];\n  for (let i = 0; i < shp.length; i++) {\n    scaledShape.push(point.scale(shp[i], scl));\n  }\n  return scaledShape;\n};\n\nconst translate = function (\n  shp: Shape,\n  offset: PointArg\n): Shape {\n  const off = point.get(offset);\n  const translatedShape: Point[] = [];\n  for (let i = 0; i < shp.length; i++) {\n    translatedShape.push([\n      shp[i][0] + off[0],\n      shp[i][1] + off[1]\n    ]);\n  }\n  return translatedShape;\n};\n\nclass ShapeTransformer {\n  constructor(public shape: Shape) {}\n  rotate(\n    angle: number,\n    pivot?: PointArg\n  ): ShapeTransformer {\n    return new ShapeTransformer(\n      rotate(this.shape, angle, pivot)\n    );\n  }\n  scale(sc: PointArg): ShapeTransformer {\n    return new ShapeTransformer(scale(this.shape, sc));\n  }\n  translate(offset: PointArg): ShapeTransformer {\n    return new ShapeTransformer(\n      translate(this.shape, offset)\n    );\n  }\n}\n\nconst shape = function (shape: Shape) {\n  return new ShapeTransformer(shape);\n};\n\nconst makeShape = {\n  rect(\n    [x1, y1]: Point = [0, 0],\n    [x2, y2]: Point = [0, 0],\n    offsetHalf: boolean = true\n  ): Shape {\n    const offset = offsetHalf ? 0 : 0.5;\n    return [\n      [x1 + offset, y1 + offset],\n      [x2 - offset, y1 + offset],\n      [x2 - offset, y2 - offset],\n      [x1 + offset, y2 - offset]\n    ];\n  },\n\n  ngon(n: number = 3): Shape {\n    const points: Point[] = [];\n    const step = TWO_PI / n;\n    for (let i = 0; i < n; i += 1) {\n      points.push([Math.sin(i * step), Math.cos(i * step)]);\n    }\n    return points;\n  }\n};\n\nconst shapeBuilder = {\n  ngon(n: number = 3): ShapeTransformer {\n    return shape(makeShape.ngon(n));\n  },\n  rect(\n    p1?: Point,\n    p2?: Point,\n    offsetHalf: boolean = true\n  ): ShapeTransformer {\n    return shape(makeShape.rect(p1, p2, offsetHalf));\n  }\n};\n\nshape.make = makeShape;\nshape.build = shapeBuilder;\nshape.scale = scale;\nshape.translate = translate;\nshape.rotate = rotate;\n\nexport { shape, makeShape };\n\n// TODO: Also an api shp(shp).scale().whatever()\n","import { Point } from '../types';\n\nexport const random = {\n  range(min: number, max: number): number {\n    return Math.random() * (max - min) + min;\n  },\n  iRange(min: number, max: number): number {\n    return Math.round(random.range(min, max));\n  },\n  m32(seed: number): number {\n    let t = seed + 0x6d2b79f5;\n    t = Math.imul(t ^ (t >>> 15), t | 1);\n    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);\n    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;\n  },\n  m32p(\n    xSeed: number,\n    ySeed: number = xSeed + 16000\n  ): Point {\n    return [random.m32(xSeed), random.m32(ySeed)];\n  }\n};\n","import { Point } from './point';\n\nexport enum Corner {\n  TopLeft = 'topLeft',\n  TopRight = 'topRight',\n  BottomRight = 'bottomRight',\n  BottomLeft = 'bottomLeft'\n}\n\nexport enum BoxPoint {\n  Center = 'center',\n  TopLeft = 'topLeft',\n  TopRight = 'topRight',\n  BottomRight = 'bottomRight',\n  BottomLeft = 'bottomLeft'\n}\n\nexport type Corners = Record<Corner, Point>;\nexport type Box = Record<BoxPoint, Point>;\n","export enum LineCap {\n  Butt = 'butt',\n  Round = 'round',\n  Square = 'square'\n}\n","export enum Repeat {\n  XY = 'repeat',\n  X = 'repeat-x',\n  Y = 'repeat-y',\n  None = 'no-repeat'\n}\n","// TODO: Make sure the class does not use its own getters\n\nimport { point } from '../helpers';\n\nimport { FillStyle, Corner, Corners, LineCap, StrokeStyle, Point, Shape, PointArg, Repeat } from '../types';\n\ninterface Text<P> {\n  (text: string | number, pos?: Point, fill?: FillStyle): P;\n  center: this;\n}\n\nexport class Canvas {\n  private strokeFill(fillStyle?: FillStyle, lineWidth?: number, strokeStyle?: StrokeStyle, closePath?: boolean) {\n    if (closePath) this.context.closePath();\n    if (lineWidth) this.context.lineWidth = lineWidth;\n    if (fillStyle) this.context.fillStyle = fillStyle;\n    if (strokeStyle) this.context.strokeStyle = strokeStyle;\n    if (lineWidth || strokeStyle) this.context.stroke();\n    if (fillStyle) this.context.fill();\n  }\n\n  public element: HTMLCanvasElement;\n  public context: CanvasRenderingContext2D;\n  private _size: Point = [0, 0];\n  private _center: Point = [0, 0];\n  private _pivot: Point = [0, 0];\n\n  public get pivot(): Point {\n    return this._pivot;\n  }\n\n  public get size(): Point {\n    return this._size;\n  }\n\n  public get height(): number {\n    return this._size[1];\n  }\n  public get width(): number {\n    return this._size[0];\n  }\n  public get cx(): number {\n    return this._size[0] / 2;\n  }\n  public get cy(): number {\n    return this._size[1] / 2;\n  }\n  public get center(): Point {\n    return this._center;\n  }\n\n  public getCorners(offsetHalf: boolean = false): Corners {\n    const offset = offsetHalf ? 0.5 : 1;\n    return {\n      [Corner.TopLeft]: [offset, offset],\n      [Corner.TopRight]: [this.width - offset, offset],\n      [Corner.BottomRight]: [this.width - offset, this.height - offset],\n      [Corner.BottomLeft]: [offset, this.height - offset],\n    };\n  }\n\n  public getContour(offsetHalf: boolean = false): Shape {\n    return Object.values(this.getCorners(offsetHalf));\n  }\n\n  constructor(size?: PointArg, target?: HTMLElement) {\n    const [width, height] = point.get(size);\n    this.element = document.createElement('canvas');\n    const context = this.element.getContext('2d');\n    if (!context) {\n      throw new Error('Could not retrieve canvas context. Are you on web?');\n    }\n    this.context = context;\n    this.setSize([width, height]);\n\n    if (target) {\n      this.appendTo(target);\n    }\n  }\n\n  public appendTo(target: HTMLElement): this {\n    target.appendChild(this.element);\n    return this;\n  }\n\n  public setSize([width, height]: Point): this {\n    this._size = [width, height];\n    this._center = [width / 2, height / 2];\n    this.element.width = width;\n    this.element.height = height;\n    return this;\n  }\n\n  public setPivot([width, height]: Point): this {\n    this._pivot = [width, height];\n    return this;\n  }\n\n  public centerPivot(): this {\n    return this.setPivot(this._center);\n  }\n\n  public rect([x1, y1]: Point, [x2, y2]: Point, fill?: FillStyle): this {\n    this.setFillStyle(fill);\n    if (x1 !== x2 && y1 !== y2) {\n      const sx = x1 < x2 ? x2 - x1 : x1 - x2;\n      const sy = y1 < y2 ? y2 - y1 : y1 - y2;\n      const px = x1 < x2 ? x1 : x2;\n      const py = y1 < y2 ? y1 : y2;\n      this.context.fillRect(px, py, sx, sy);\n    }\n    return this;\n  }\n\n  public dot([x, y]: Point, color?: FillStyle, size: number = 1): this {\n    if (color) {\n      this.context.fillStyle = color;\n    }\n    const fl = Math.floor(size / 2);\n    this.context.fillRect(x - fl, y - fl, size, size);\n    return this;\n  }\n\n  public setFillStyle(fillStyle?: FillStyle): this {\n    if (fillStyle) {\n      this.context.fillStyle = fillStyle;\n    }\n    return this;\n  }\n\n  public fill(fillStyle: FillStyle): this {\n    this.setFillStyle(fillStyle);\n    this.context.fillRect(0, 0, this.width, this.height);\n    return this;\n  }\n\n  public clear(): this {\n    this.context.clearRect(0, 0, this.width, this.height);\n    return this;\n  }\n\n  // TODO: Refactor maybe\n  public crisp(): this {\n    this.context.imageSmoothingEnabled = false;\n    this.element.style.imageRendering = 'pixelated';\n    return this;\n  }\n\n  // TODO: Rid of C0DEFF past :D\n  public draw(\n    destination: Canvas,\n    [x, y]: Point = [0, 0],\n    rotation?: number,\n    scale: PointArg = 1,\n    alpha: number = 1\n  ): this {\n    const scl = point.get(scale);\n    // TODO: Take smoothing into account\n    destination.context.save();\n    const [px, py] = this.pivot;\n    destination.context.globalAlpha = alpha;\n    if (!rotation && !scl && !rotation) {\n      destination.context.drawImage(this.element, x - px, y - py);\n    } else {\n      if (x || y) {\n        destination.context.translate(x, y);\n      }\n      if (rotation) {\n        destination.context.rotate(rotation);\n      }\n      if (scl) {\n        destination.context.scale(scl[0], scl[1]);\n      }\n      destination.context.translate(-px, -py);\n      destination.context.drawImage(this.element, 0, 0);\n      // destination.context.setTransform(1, 0, 0, 1, 0, 0); // TODO: Is this needed?\n      // TODO: Maybe, use setTransform for translate/rotate/scl\n    }\n    destination.context.restore();\n    return this;\n  }\n\n  public line(a: PointArg, b: PointArg, color: FillStyle, width: number = 1): this {\n    this.poly([point.get(a), point.get(b)], 'transparent', width, color, false);\n    return this;\n  }\n\n  public createPattern(c: CanvasImageSource | Canvas, repetition: Repeat = Repeat.XY) {\n    if (c instanceof Canvas) {\n      return this.context.createPattern(c.element, repetition);\n    }\n    return this.context.createPattern(c, repetition);\n  }\n\n  public poly(\n    shape: Shape,\n    fillStyle?: FillStyle,\n    lineWidth: number = 1,\n    strokeColor?: FillStyle,\n    closePath: boolean = true,\n    lineCap: LineCap = LineCap.Butt\n  ) {\n    this.context.lineCap = lineCap;\n\n    this.context.beginPath();\n    this.context.moveTo(shape[0][0], shape[0][1]);\n\n    for (var i = 1; i < shape.length; i++) {\n      this.context.lineTo(shape[i][0], shape[i][1]);\n    }\n\n    this.strokeFill(fillStyle, lineWidth, strokeColor, closePath);\n\n    return this;\n  }\n\n  public copy(cropStart?: PointArg, cropEnd?: PointArg): Canvas {\n    const [sx, sy] = point.get(cropStart);\n    const [ex, ey] = point.get(cropEnd, this.size);\n    const clone = new Canvas([ex - sx, ey - sy]);\n    clone.context.drawImage(this.element, -sx, -sy); // TODO: Benchmark fastest way of doing this\n    return clone;\n  }\n\n  // TODO: Split this\n  public get text(): Text<this> {\n    const that: Canvas = this;\n    let setTextAlign: CanvasRenderingContext2D['textAlign'] = 'start';\n    let setBaseLine: CanvasRenderingContext2D['textBaseline'] = 'top';\n    const textMaker = function (text: string | number, [x, y]: Point = [10, 10], fill?: FillStyle) {\n      const oldTextAlign = that.context.textAlign;\n      const oldTextBaseline = that.context.textBaseline;\n      that.context.textAlign = setTextAlign;\n      that.context.textBaseline = setBaseLine;\n      that.setFillStyle(fill);\n      that.context.fillText(`${text}`, x, y);\n      that.context.textAlign = oldTextAlign;\n      that.context.textBaseline = oldTextBaseline;\n      return that;\n    };\n\n    Object.defineProperty(textMaker, 'center', {\n      get: function () {\n        setTextAlign = 'center';\n        setBaseLine = 'middle';\n        return textMaker;\n      },\n    });\n\n    //@ts-expect-error TODO: Learn how to make defineProperty work TS way.\n    return textMaker;\n  }\n}\n","type EventHandler<Args extends Array<unknown>> = (\n  ...args: Args\n) => void;\n\nexport class EventListener<Args extends Array<unknown>> {\n  private timesFired: number = 0;\n  constructor(\n    // If event has been fired, on adding handler - it will be called\n    // (will also be added to handlers)\n    private fireOnAdd: boolean = false,\n    // The event fires only once\n    private happensOnce: boolean = false\n  ) {}\n  handlers: EventHandler<Args>[] = [];\n  addHandler(eh: EventHandler<Args>) {\n    if (this.fireOnAdd && this.timesFired > 0 && this.lastArgs) {\n      eh.apply(this, this.lastArgs);\n    }\n    this.handlers.push(eh);\n  }\n  lastArgs?: Args;\n  fire(...args: Args) {\n    if (!this.happensOnce || this.timesFired === 0) {\n      this.timesFired += 1;\n      this.lastArgs = args;\n      for (let i = 0; i < this.handlers.length; i++) {\n        this.handlers[i].apply(this, args);\n      }\n    }\n  }\n}\n\nexport const makeListener = function <\n  Args extends Array<unknown>\n>(\n  fireOnAdd: boolean = false,\n  happensOnce: boolean = false\n) {\n  const listener = new EventListener<Args>(\n    fireOnAdd,\n    happensOnce\n  );\n  const adder = function (handler: EventHandler<Args>) {\n    listener.addHandler(handler);\n  };\n  adder.fire = function (...args: Args) {\n    listener.fire(...args);\n  };\n  return adder;\n};\n"],"names":["Corner","BoxPoint","LineCap","Repeat"],"mappings":"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"}